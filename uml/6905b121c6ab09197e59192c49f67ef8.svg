<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1137px" preserveAspectRatio="none" style="width:1060px;height:1137px;" version="1.1" viewBox="0 0 1060 1137" width="1060px" zoomAndPan="magnify"><defs><filter height="300%" id="f6fomzz8ejd0v" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="529.25" cy="20" fill="#000000" filter="url(#f6fomzz8ejd0v)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><path d="M606.25,46.8516 L606.25,62.9844 L586.25,66.9844 L606.25,70.9844 L606.25,87.1172 A0,0 0 0 0 606.25,87.1172 L810.25,87.1172 A0,0 0 0 0 810.25,87.1172 L810.25,56.8516 L800.25,46.8516 L606.25,46.8516 A0,0 0 0 0 606.25,46.8516 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M800.25,46.8516 L800.25,56.8516 L810.25,56.8516 L800.25,46.8516 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="612.25" y="63.9185">It'll be different per test-case</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="612.25" y="79.0513">and per template basis.</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="472.25" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="482.25" y="71.1387">create work dir</text><path d="M199.25,178.3242 L199.25,218.5898 A0,0 0 0 0 199.25,218.5898 L429.25,218.5898 A0,0 0 0 0 429.25,218.5898 L429.25,202.457 L449.25,198.457 L429.25,194.457 L429.25,188.3242 L419.25,178.3242 L199.25,178.3242 A0,0 0 0 0 199.25,178.3242 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M419.25,178.3242 L419.25,188.3242 L429.25,188.3242 L419.25,178.3242 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="205.25" y="195.3911">avoid re-running npm install</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="205.25" y="210.5239">for each test case and template;</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="449.25" y="181.4727"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="459.25" y="202.6113">symlink node_modules</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="457.25,129.9219,601.25,129.9219,613.25,141.9219,601.25,153.9219,457.25,153.9219,445.25,141.9219,457.25,129.9219" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="533.25" y="164.1323">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="457.25" y="145.73">has a node_modules dir?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="613.25" y="139.3276">no</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="529.25,238.5898,541.25,250.5898,529.25,262.5898,517.25,250.5898,529.25,238.5898" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M634.25,272.5898 L634.25,303.8555 L614.25,307.8555 L634.25,311.8555 L634.25,343.1211 A0,0 0 0 0 634.25,343.1211 L838.25,343.1211 A0,0 0 0 0 838.25,343.1211 L838.25,282.5898 L828.25,272.5898 L634.25,272.5898 A0,0 0 0 0 634.25,272.5898 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M828.25,272.5898 L828.25,282.5898 L838.25,282.5898 L828.25,272.5898 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="640.25" y="289.6567">all files in template dir are</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="640.25" y="304.7896">copied to test case work dir</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="640.25" y="319.9224">except `node_modules` and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="640.25" y="335.0552">`package-lock.json`</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="170" x="444.25" y="290.8711"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="150" x="454.25" y="312.0098">copy files from template</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="306.5,407.1211,392.5,407.1211,404.5,419.1211,392.5,431.1211,306.5,431.1211,294.5,419.1211,306.5,407.1211" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="353.5" y="441.3315">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="306.5" y="422.9292">is snapshot dir</text><path d="M36,462.8315 L36,533.3628 A0,0 0 0 0 36,533.3628 L287,533.3628 A0,0 0 0 0 287,533.3628 L287,502.0972 L307,498.0972 L287,494.0972 L287,472.8315 L277,462.8315 L36,462.8315 A0,0 0 0 0 36,462.8315 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M277,462.8315 L277,472.8315 L287,472.8315 L277,462.8315 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="42" y="479.8984">snapshots directories are symlinked</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="42" y="495.0313">to test case source dir so that</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="42" y="510.1641">updating them would update in the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="42" y="525.2969">source folder</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="307" y="481.1128"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="65" x="317" y="502.2515">symlink dir</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="579.5,407.1211,666.5,407.1211,678.5,419.1211,666.5,431.1211,579.5,431.1211,567.5,419.1211,579.5,407.1211" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="627" y="441.3315">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="579.5" y="422.9292">is jest.config.js</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="678.5" y="416.5269">others</text><path d="M434.5,511.2339 L434.5,551.4995 A0,0 0 0 0 434.5,551.4995 L518.5,551.4995 A0,0 0 0 0 518.5,551.4995 L518.5,535.3667 L538.5,531.3667 L518.5,527.3667 L518.5,521.2339 L508.5,511.2339 L434.5,511.2339 A0,0 0 0 0 434.5,511.2339 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M508.5,511.2339 L508.5,521.2339 L518.5,521.2339 L508.5,511.2339 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="440.5" y="528.3008">allows for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="440.5" y="543.4336">extending</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="169" x="538.5" y="514.3823"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149" x="548.5" y="535.521">call with parent content</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="552,462.8315,694,462.8315,706,474.8315,694,486.8315,552,486.8315,540,474.8315,552,462.8315" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="627" y="497.042">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="552" y="478.6396">jest.config.js is function?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="706" y="472.2373">no</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="623,575.9019,635,587.9019,623,599.9019,611,587.9019,623,575.9019" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M818.5,492.6987 L818.5,523.9644 L798.5,527.9644 L818.5,531.9644 L818.5,563.23 A0,0 0 0 0 818.5,563.23 L1022.5,563.23 A0,0 0 0 0 1022.5,563.23 L1022.5,502.6987 L1012.5,492.6987 L818.5,492.6987 A0,0 0 0 0 818.5,492.6987 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1012.5,492.6987 L1012.5,502.6987 L1022.5,502.6987 L1012.5,492.6987 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="824.5" y="509.7656">all files in test case source</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="824.5" y="524.8984">dir are copied to the work dir</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="824.5" y="540.0313">except `node_modules` and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="824.5" y="555.1641">`package-lock.json`</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="749.5" y="510.98"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="29" x="759.5" y="532.1187">copy</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="450.25,363.1211,608.25,363.1211,620.25,375.1211,608.25,387.1211,450.25,387.1211,438.25,375.1211,450.25,363.1211" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="450.25" y="378.9292">for each file in test case dir</text><path d="M618.25,651.9019 L618.25,683.1675 L598.25,687.1675 L618.25,691.1675 L618.25,722.4331 A0,0 0 0 0 618.25,722.4331 L849.25,722.4331 A0,0 0 0 0 849.25,722.4331 L849.25,661.9019 L839.25,651.9019 L618.25,651.9019 A0,0 0 0 0 618.25,651.9019 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M839.25,651.9019 L839.25,661.9019 L849.25,661.9019 L839.25,651.9019 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="624.25" y="668.9688">some special files are created</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="624.25" y="684.1016">to handle hooks for example and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="624.25" y="699.2344">grab `process()` IO for later</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="624.25" y="714.3672">expectations</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="460.25" y="670.1831"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="118" x="470.25" y="691.3218">create special files</text><path d="M625.75,732.4331 L625.75,763.6987 L605.75,767.6987 L625.75,771.6987 L625.75,802.9644 A0,0 0 0 0 625.75,802.9644 L830.75,802.9644 A0,0 0 0 0 830.75,802.9644 L830.75,742.4331 L820.75,732.4331 L625.75,732.4331 A0,0 0 0 0 625.75,732.4331 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M820.75,732.4331 L820.75,742.4331 L830.75,742.4331 L820.75,732.4331 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="631.75" y="749.5">set a custom but fixed name</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="631.75" y="764.6328">and version in package.json</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="631.75" y="779.7656">which is specific to the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="631.75" y="794.8984">test case + template</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="452.75" y="750.7144"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="133" x="462.75" y="771.853">update package.json</text><rect fill="#FF6347" filter="url(#f6fomzz8ejd0v)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="490.75" y="822.9644"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="57" x="500.75" y="844.103">run tests</text><path d="M573.75,922.6436 L573.75,961.4756 L553.75,965.4756 L573.75,969.4756 L573.75,1008.3076 A0,0 0 0 0 573.75,1008.3076 L819.75,1008.3076 A0,0 0 0 0 819.75,1008.3076 L819.75,932.6436 L809.75,922.6436 L573.75,922.6436 A0,0 0 0 0 573.75,922.6436 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M809.75,922.6436 L809.75,932.6436 L819.75,932.6436 L809.75,922.6436 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="579.75" y="939.7104">while we symlinked each snapshots</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="579.75" y="954.8433">directory, newly created snapshots</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="579.75" y="969.9761">in non existing dir will need to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="579.75" y="985.1089">be copied over into</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="579.75" y="1000.2417">e2e/__cases__/{test-case}</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="504.75" y="948.4912"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="29" x="514.75" y="969.6299">copy</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="477.25,876.9331,581.25,876.9331,593.25,888.9331,581.25,900.9331,477.25,900.9331,465.25,888.9331,477.25,876.9331" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="533.25" y="911.1436">missing in test case</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="477.25" y="892.7412">for each snapshot</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="476.25" y="1050.3076"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="486.25" y="1071.4463">return results</text><ellipse cx="529.25" cy="1115.2764" fill="#FFFFFF" filter="url(#f6fomzz8ejd0v)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="529.25" cy="1115.2764" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="30" y2="50"/><polygon fill="#A80036" points="525.25,40,529.25,50,533.25,40,529.25,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="153.9219" y2="181.4727"/><polygon fill="#A80036" points="525.25,171.4727,529.25,181.4727,533.25,171.4727,529.25,175.4727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="613.25" x2="625.25" y1="141.9219" y2="141.9219"/><polygon fill="#A80036" points="621.25,188.457,625.25,198.457,629.25,188.457,625.25,192.457" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="625.25" x2="625.25" y1="141.9219" y2="250.5898"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="625.25" x2="541.25" y1="250.5898" y2="250.5898"/><polygon fill="#A80036" points="551.25,246.5898,541.25,250.5898,551.25,254.5898,547.25,250.5898" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="215.4414" y2="238.5898"/><polygon fill="#A80036" points="525.25,228.5898,529.25,238.5898,533.25,228.5898,529.25,232.5898" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="83.9688" y2="129.9219"/><polygon fill="#A80036" points="525.25,119.9219,529.25,129.9219,533.25,119.9219,529.25,123.9219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="279" x="533.25" y="108.4219">e2e/__workdir_symlink__/{template}/{test-case}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="262.5898" y2="290.8711"/><polygon fill="#A80036" points="525.25,280.8711,529.25,290.8711,533.25,280.8711,529.25,284.8711" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="623" x2="623" y1="486.8315" y2="514.3823"/><polygon fill="#A80036" points="619,504.3823,623,514.3823,627,504.3823,623,508.3823" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="706" x2="718" y1="474.8315" y2="474.8315"/><polygon fill="#A80036" points="714,521.3667,718,531.3667,722,521.3667,718,525.3667" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="718" x2="718" y1="474.8315" y2="587.9019"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="718" x2="635" y1="587.9019" y2="587.9019"/><polygon fill="#A80036" points="645,583.9019,635,587.9019,645,591.9019,641,587.9019" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="623" x2="623" y1="548.3511" y2="575.9019"/><polygon fill="#A80036" points="619,565.9019,623,575.9019,627,565.9019,623,569.9019" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="349.5" x2="349.5" y1="431.1211" y2="481.1128"/><polygon fill="#A80036" points="345.5,471.1128,349.5,481.1128,353.5,471.1128,349.5,475.1128" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="349.5" x2="349.5" y1="515.0815" y2="619.9019"/><polygon fill="#A80036" points="345.5,609.9019,349.5,619.9019,353.5,609.9019,349.5,613.9019" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="623" x2="623" y1="431.1211" y2="462.8315"/><polygon fill="#A80036" points="619,452.8315,623,462.8315,627,452.8315,623,456.8315" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="623" x2="623" y1="599.9019" y2="619.9019"/><polygon fill="#A80036" points="619,609.9019,623,619.9019,627,609.9019,623,613.9019" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="404.5" x2="567.5" y1="419.1211" y2="419.1211"/><polygon fill="#A80036" points="557.5,415.1211,567.5,419.1211,557.5,423.1211,561.5,419.1211" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="387.1211" y2="392.1211"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="349.5" y1="392.1211" y2="392.1211"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="349.5" x2="349.5" y1="392.1211" y2="407.1211"/><polygon fill="#A80036" points="345.5,397.1211,349.5,407.1211,353.5,397.1211,349.5,401.1211" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="678.5" x2="774" y1="419.1211" y2="419.1211"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="774" x2="774" y1="419.1211" y2="510.98"/><polygon fill="#A80036" points="770,500.98,774,510.98,778,500.98,774,504.98" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="774" x2="774" y1="544.9487" y2="619.9019"/><polygon fill="#A80036" points="770,609.9019,774,619.9019,778,609.9019,774,613.9019" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="349.5" x2="774" y1="619.9019" y2="619.9019"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="619.9019" y2="629.9019"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="1034.5" y1="629.9019" y2="629.9019"/><polygon fill="#A80036" points="1030.5,525.9644,1034.5,515.9644,1038.5,525.9644,1034.5,521.9644" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1034.5" x2="1034.5" y1="375.1211" y2="629.9019"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1034.5" x2="620.25" y1="375.1211" y2="375.1211"/><polygon fill="#A80036" points="630.25,371.1211,620.25,375.1211,630.25,379.1211,626.25,375.1211" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="438.25" x2="24" y1="375.1211" y2="375.1211"/><polygon fill="#A80036" points="20,511.9644,24,521.9644,28,511.9644,24,515.9644" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="24" y1="375.1211" y2="641.9019"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="529.25" y1="641.9019" y2="641.9019"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="641.9019" y2="670.1831"/><polygon fill="#A80036" points="525.25,660.1831,529.25,670.1831,533.25,660.1831,529.25,664.1831" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="324.8398" y2="363.1211"/><polygon fill="#A80036" points="525.25,353.1211,529.25,363.1211,533.25,353.1211,529.25,357.1211" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="704.1519" y2="750.7144"/><polygon fill="#A80036" points="525.25,740.7144,529.25,750.7144,533.25,740.7144,529.25,744.7144" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="784.6831" y2="822.9644"/><polygon fill="#A80036" points="525.25,812.9644,529.25,822.9644,533.25,812.9644,529.25,816.9644" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="900.9331" y2="948.4912"/><polygon fill="#A80036" points="525.25,938.4912,529.25,948.4912,533.25,938.4912,529.25,942.4912" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="982.46" y2="1018.3076"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="831.75" y1="1018.3076" y2="1018.3076"/><polygon fill="#A80036" points="827.75,957.0732,831.75,947.0732,835.75,957.0732,831.75,953.0732" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="831.75" x2="831.75" y1="888.9331" y2="1018.3076"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="831.75" x2="593.25" y1="888.9331" y2="888.9331"/><polygon fill="#A80036" points="603.25,884.9331,593.25,888.9331,603.25,892.9331,599.25,888.9331" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="465.25" x2="453.25" y1="888.9331" y2="888.9331"/><polygon fill="#A80036" points="449.25,943.0732,453.25,953.0732,457.25,943.0732,453.25,947.0732" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="453.25" x2="453.25" y1="888.9331" y2="1030.3076"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="453.25" x2="529.25" y1="1030.3076" y2="1030.3076"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="1030.3076" y2="1050.3076"/><polygon fill="#A80036" points="525.25,1040.3076,529.25,1050.3076,533.25,1040.3076,529.25,1044.3076" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="856.9331" y2="876.9331"/><polygon fill="#A80036" points="525.25,866.9331,529.25,876.9331,533.25,866.9331,529.25,870.9331" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="529.25" x2="529.25" y1="1084.2764" y2="1104.2764"/><polygon fill="#A80036" points="525.25,1094.2764,529.25,1104.2764,533.25,1094.2764,529.25,1098.2764" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[aad2052d57833f21a6396941f1246023]
@startuml


start

:create work dir;
note right
  It'll be different per test-case
  and per template basis.
end note
-> e2e/~__workdir_symlink__/{template}/{test-case};

if (has a node_modules dir?) then (yes)
  :symlink node_modules;
  note left
    avoid re-running npm install
    for each test case and template;
  end note
else (no)
endif

:copy files from template;
note right
  all files in template dir are
  copied to test case work dir
  except `node_modules` and
  `package-lock.json`
end note

while (for each file in test case dir)
  if (is snapshot dir) then (yes)
    :symlink dir;
    note left
      snapshots directories are symlinked
      to test case source dir so that
      updating them would update in the
      source folder
    end note

  else if (is jest.config.js) then (yes)
    if (jest.config.js is function?) then (yes)
      :call with parent content;
      note left
        allows for
        extending
      end note
    else (no)
    endif

  else (others)
    :copy;
    note right
      all files in test case source
      dir are copied to the work dir
      except `node_modules` and
      `package-lock.json`
    end note

  endif
endwhile

:create special files;
note right
  some special files are created
  to handle hooks for example and
  grab `process()` IO for later
  expectations
end note

:update package.json;
note right
  set a custom but fixed name
  and version in package.json
  which is specific to the
  test case + template
end note

#tomato:run tests;

while (for each snapshot) is (missing in test case)
  :copy;
  note right
    while we symlinked each snapshots
    directory, newly created snapshots
    in non existing dir will need to
    be copied over into
    e2e/~__cases__/{test-case}
  end note
endwhile

:return results;

stop


@enduml

PlantUML version 1.2020.05(Fri Mar 20 02:47:32 IST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_45-b14
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: IN
--></g></svg>