<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="925px" preserveAspectRatio="none" style="width:814px;height:925px;" version="1.1" viewBox="0 0 814 925" width="814px" zoomAndPan="magnify"><defs><filter height="300%" id="f14d5ngxdxtuc4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="258.5" cy="20" fill="#000000" filter="url(#f14d5ngxdxtuc4)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><path d="M331.5,54.418 L331.5,62.9844 L311.5,66.9844 L331.5,70.9844 L331.5,79.5508 A0,0 0 0 0 331.5,79.5508 L621.5,79.5508 A0,0 0 0 0 621.5,79.5508 L621.5,64.418 L611.5,54.418 L331.5,54.418 A0,0 0 0 0 331.5,54.418 " fill="#FBFB77" filter="url(#f14d5ngxdxtuc4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M611.5,54.418 L611.5,64.418 L621.5,64.418 L611.5,54.418 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="269" x="337.5" y="71.4849">will build ts-jest before creating the bundle</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="205.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="215.5" y="71.1387">bundle ts-jest</text><path d="M353.5,100.8203 L353.5,116.9531 L333.5,120.9531 L353.5,124.9531 L353.5,141.0859 A0,0 0 0 0 353.5,141.0859 L605.5,141.0859 A0,0 0 0 0 605.5,141.0859 L605.5,110.8203 L595.5,100.8203 L353.5,100.8203 A0,0 0 0 0 353.5,100.8203 " fill="#FBFB77" filter="url(#f14d5ngxdxtuc4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M595.5,100.8203 L595.5,110.8203 L605.5,110.8203 L595.5,100.8203 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="359.5" y="117.8872">`e2e/__workdir_symlink__` links to it</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="359.5" y="133.02">except on CI environments</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="183.5" y="103.9688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="130" x="193.5" y="125.1074">create temp work dir</text><path d="M533,493.2148 L533,518.3477 L802,518.3477 L802,503.2148 L792,493.2148 L533,493.2148 " fill="#FBFB77" filter="url(#f14d5ngxdxtuc4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M792,493.2148 L792,503.2148 L802,503.2148 L792,493.2148 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="539" y="510.2817">templates are in `e2e/__templates__/`</text><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="186,205.0859,331,205.0859,343,217.0859,331,229.0859,186,229.0859,174,217.0859,186,205.0859" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="186" y="220.894">template's build directory</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="140" y="214.4917">exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="343" y="214.4917">not exists</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="200" x="64" y="239.0859"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="180" x="74" y="260.2246">wipe but `node_modules` dir</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="61" x="322.5" y="239.0859"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="41" x="332.5" y="260.2246">create</text><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="258.5,279.0547,270.5,291.0547,258.5,303.0547,246.5,291.0547,258.5,279.0547" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="290" x="113.5" y="323.0547"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="270" x="123.5" y="344.1934">copy files from template's dir to its build dir</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="201.5" y="425.4258"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="211.5" y="446.5645">read metadata</text><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="87.5,479.3945,181.5,479.3945,193.5,491.3945,181.5,503.3945,87.5,503.3945,75.5,491.3945,87.5,479.3945" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="138.5" y="513.605">has changed</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="87.5" y="495.2026">package lock file</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="38" y="536.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="173" x="48" y="557.3379">remove `node_modules` dir</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="70" y="590.168"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="109" x="80" y="611.3066">npm install (or ci)</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="178" x="45.5" y="644.1367"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="158" x="55.5" y="665.2754">npm install ts-jest bundle</text><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="301,479.3945,379,479.3945,391,491.3945,379,503.3945,301,503.3945,289,491.3945,301,479.3945" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="344" y="513.605">has changed</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="301" y="495.2026">ts-jest bundle</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="391" y="488.8003">hasn't changed</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="178" x="251" y="536.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="158" x="261" y="557.3379">npm install ts-jest bundle</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="172" x="172.5" y="718.1055"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="152" x="182.5" y="739.2441">write updated metadata</text><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="211.5,377.0234,305.5,377.0234,317.5,389.0234,305.5,401.0234,211.5,401.0234,199.5,389.0234,211.5,377.0234" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="262.5" y="411.2339">exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="211.5" y="392.8315">package lock file</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="317.5" y="386.4292">not exists</text><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="258.5,772.0742,270.5,784.0742,258.5,796.0742,246.5,784.0742,258.5,772.0742" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="208,161.0859,309,161.0859,321,173.0859,309,185.0859,208,185.0859,196,173.0859,208,161.0859" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="208" y="176.894">for each template</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="168" y="170.4917">done</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="188.5" y="838.0742"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="120" x="198.5" y="859.2129">all templates ready</text><ellipse cx="258.5" cy="903.043" fill="#FFFFFF" filter="url(#f14d5ngxdxtuc4)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="258.5" cy="903.043" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="30" y2="50"/><polygon fill="#A80036" points="254.5,40,258.5,50,262.5,40,258.5,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="83.9688" y2="103.9688"/><polygon fill="#A80036" points="254.5,93.9688,258.5,103.9688,262.5,93.9688,258.5,97.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="174" x2="164" y1="217.0859" y2="217.0859"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="164" x2="164" y1="217.0859" y2="239.0859"/><polygon fill="#A80036" points="160,229.0859,164,239.0859,168,229.0859,164,233.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="343" x2="353" y1="217.0859" y2="217.0859"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="353" x2="353" y1="217.0859" y2="239.0859"/><polygon fill="#A80036" points="349,229.0859,353,239.0859,357,229.0859,353,233.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="164" x2="164" y1="273.0547" y2="291.0547"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="164" x2="246.5" y1="291.0547" y2="291.0547"/><polygon fill="#A80036" points="236.5,287.0547,246.5,291.0547,236.5,295.0547,240.5,291.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="353" x2="353" y1="273.0547" y2="291.0547"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="353" x2="270.5" y1="291.0547" y2="291.0547"/><polygon fill="#A80036" points="280.5,287.0547,270.5,291.0547,280.5,295.0547,276.5,291.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="303.0547" y2="323.0547"/><polygon fill="#A80036" points="254.5,313.0547,258.5,323.0547,262.5,313.0547,258.5,317.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="134.5" x2="134.5" y1="570.168" y2="590.168"/><polygon fill="#A80036" points="130.5,580.168,134.5,590.168,138.5,580.168,134.5,584.168" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="134.5" x2="134.5" y1="624.1367" y2="644.1367"/><polygon fill="#A80036" points="130.5,634.1367,134.5,644.1367,138.5,634.1367,134.5,638.1367" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="134.5" x2="134.5" y1="503.3945" y2="536.1992"/><polygon fill="#A80036" points="130.5,526.1992,134.5,536.1992,138.5,526.1992,134.5,530.1992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="134.5" x2="134.5" y1="678.1055" y2="698.1055"/><polygon fill="#A80036" points="130.5,688.1055,134.5,698.1055,138.5,688.1055,134.5,692.1055" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="503.3945" y2="536.1992"/><polygon fill="#A80036" points="336,526.1992,340,536.1992,344,526.1992,340,530.1992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340" x2="340" y1="570.168" y2="698.1055"/><polygon fill="#A80036" points="336,688.1055,340,698.1055,344,688.1055,340,692.1055" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="193.5" x2="289" y1="491.3945" y2="491.3945"/><polygon fill="#A80036" points="279,487.3945,289,491.3945,279,495.3945,283,491.3945" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="459.3945" y2="464.3945"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="134.5" y1="464.3945" y2="464.3945"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="134.5" x2="134.5" y1="464.3945" y2="479.3945"/><polygon fill="#A80036" points="130.5,469.3945,134.5,479.3945,138.5,469.3945,134.5,473.3945" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="391" x2="464" y1="491.3945" y2="491.3945"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="464" x2="464" y1="491.3945" y2="698.1055"/><polygon fill="#A80036" points="460,688.1055,464,698.1055,468,688.1055,464,692.1055" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="134.5" x2="464" y1="698.1055" y2="698.1055"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="698.1055" y2="718.1055"/><polygon fill="#A80036" points="254.5,708.1055,258.5,718.1055,262.5,708.1055,258.5,712.1055" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="401.0234" y2="425.4258"/><polygon fill="#A80036" points="254.5,415.4258,258.5,425.4258,262.5,415.4258,258.5,419.4258" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="317.5" x2="489" y1="389.0234" y2="389.0234"/><polygon fill="#A80036" points="485,593.75,489,603.75,493,593.75,489,597.75" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="489" x2="489" y1="389.0234" y2="784.0742"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="489" x2="270.5" y1="784.0742" y2="784.0742"/><polygon fill="#A80036" points="280.5,780.0742,270.5,784.0742,280.5,788.0742,276.5,784.0742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="752.0742" y2="772.0742"/><polygon fill="#A80036" points="254.5,762.0742,258.5,772.0742,262.5,762.0742,258.5,766.0742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="357.0234" y2="377.0234"/><polygon fill="#A80036" points="254.5,367.0234,258.5,377.0234,262.5,367.0234,258.5,371.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="185.0859" y2="205.0859"/><polygon fill="#A80036" points="254.5,195.0859,258.5,205.0859,262.5,195.0859,258.5,199.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="796.0742" y2="806.0742"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="513" y1="806.0742" y2="806.0742"/><polygon fill="#A80036" points="509,515.7813,513,505.7813,517,515.7813,513,511.7813" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="513" x2="513" y1="173.0859" y2="806.0742"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="513" x2="321" y1="173.0859" y2="173.0859"/><polygon fill="#A80036" points="331,169.0859,321,173.0859,331,177.0859,327,173.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="196" x2="24" y1="173.0859" y2="173.0859"/><polygon fill="#A80036" points="20,501.7813,24,511.7813,28,501.7813,24,505.7813" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="24" y1="173.0859" y2="818.0742"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="258.5" y1="818.0742" y2="818.0742"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="818.0742" y2="838.0742"/><polygon fill="#A80036" points="254.5,828.0742,258.5,838.0742,262.5,828.0742,258.5,832.0742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="137.9375" y2="161.0859"/><polygon fill="#A80036" points="254.5,151.0859,258.5,161.0859,262.5,151.0859,258.5,155.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258.5" x2="258.5" y1="872.043" y2="892.043"/><polygon fill="#A80036" points="254.5,882.043,258.5,892.043,262.5,882.043,258.5,886.043" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2e3abf3bb6a896cb20af0115e88c591c]
@startuml


start

:bundle ts-jest;
note right
  will build ts-jest before creating the bundle
end note

:create temp work dir;
note right
  `e2e/~__workdir_symlink__` links to it
  except on CI environments
end note

while (for each template)
  note right
    templates are in `e2e/~__templates__/`
  end note

  if (template's build directory) then (exists)
    :wipe but `node_modules` dir;
  else (not exists)
    :create;
  endif

  :copy files from template's dir to its build dir;

  if (package lock file) then (exists)
    :read metadata;

    if (package lock file) then (has changed)
      :remove `node_modules` dir;

      :npm install (or ci);

      :npm install ts-jest bundle;

    else if (ts-jest bundle) then (has changed)
      :npm install ts-jest bundle;

    else (hasn't changed)
    endif
    :write updated metadata;

  else (not exists)
  endif

endwhile (done)

:all templates ready;

stop


@enduml

PlantUML version 1.2020.05(Fri Mar 20 02:47:32 IST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_45-b14
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: IN
--></g></svg>